<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="by Dan Peirce B.Sc." />
  <title>Testing PIC18F46K42 XPRESS Board with ESP8266</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="pandocbd.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Testing PIC18F46K42 XPRESS Board with ESP8266</h1>
<p class="author">by Dan Peirce B.Sc.</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#testing-pic18f46k42-xpress-board-with-esp8266">Testing PIC18F46K42 XPRESS Board with ESP8266</a>
<ul>
<li><a href="#pic18f46k42-xpress-board-features">PIC18F46K42 XPRESS Board Features</a>
<ul>
<li><a href="#pins-used">Pins Used</a></li>
<li><a href="#solder-bumps">Solder Bumps</a></li>
</ul></li>
<li><a href="#connecting-uart1-tx-to-usb-to-serial-adaptor-to-test-board">Connecting UART1 Tx to USB to Serial Adaptor to Test Board</a></li>
<li><a href="#connecting-uart1-to-esp8266-module">Connecting UART1 to ESP8266 module</a>
<ul>
<li><a href="#more-on-esp8266-module">More on ESP8266 Module</a></li>
</ul></li>
<li><a href="#working-with-putty-and-limitations">Working with PuTTY and limitations</a></li>
<li><a href="#after-build-copy">After Build Copy</a></li>
</ul></li>
</ul>
</nav>
<!---
use 
pandoc -s --toc -t html5 -c pandocbd.css README.pandoc.md -o index.html

pandoc -s --toc -t gfm README.pandoc.md -o README.md
-->
<h1 id="testing-pic18f46k42-xpress-board-with-esp8266">Testing PIC18F46K42 XPRESS Board with ESP8266</h1>
<p>This branch of the project was set up to explore adding a ESP8266 module to the PIC18F46K42 XPRESS Board.</p>
<h2 id="pic18f46k42-xpress-board-features">PIC18F46K42 XPRESS Board Features</h2>
<p>This board has a USB microB connector. It has a PIC MCU on board configured to act as an interface and it enumerates as a multifunction device. This allows one to both download programs to it as a mass storage device and use the interface as a virtual com port.</p>
<h3 id="pins-used">Pins Used</h3>
<p><img src="images/pins.png" /></p>
<ul>
<li>UART1 is at 115200 baud. Tx1 is on RC6.</li>
<li>UART2 is connected to the XPRESS boards USB interface PIC.
<ul>
<li>Communication between UART2 and the interface IC is at 9600 baud.</li>
</ul></li>
</ul>
<h3 id="solder-bumps">Solder Bumps</h3>
<p>Solder Bump for 3.3 volts removed.</p>
<p><img src="images/solder-bump-removed.jpg" /></p>
<p>Solder Bump for 5 volts added.</p>
<p><img src="images/solder-bump-added.jpg" /></p>
<h2 id="connecting-uart1-tx-to-usb-to-serial-adaptor-to-test-board">Connecting UART1 Tx to USB to Serial Adaptor to Test Board</h2>
<p><img src="images/uart-forward-2-1.jpg" /></p>
<h2 id="connecting-uart1-to-esp8266-module">Connecting UART1 to ESP8266 module</h2>
<p><strong>planning to add notes</strong></p>
<h3 id="more-on-esp8266-module">More on ESP8266 Module</h3>
<p>There is more than one way to use these modules. For either APSC1299 or PHYS2600 it would be fitting to use the pass through mode.</p>
<ul>
<li><a href="https://www.adafruit.com/product/2471">Adafruit HUZZAH ESP8266 Breakout PRODUCT ID: 2471</a></li>
<li><a href="https://www.digikey.ca/en/products/detail/adafruit-industries-llc/2471/5355489?utm_adgroup=RF%2FIF%20and%20RFID&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=Smart%20Shopping_Product_RF%2FIF%20and%20RFID&amp;utm_term=&amp;productid=5355489&amp;gclid=EAIaIQobChMIqsCw_oPU6wIVlhitBh1k-QyWEAYYAiABEgLrJvD_BwE">ESP8266 HUZZAH BREAKOUT BOARD Digikey</a></li>
<li><a href="https://www.espressif.com/sites/default/files/documentation/4a-esp8266_at_instruction_set_en.pdf">at commands</a></li>
<li><a href="https://www.espressif.com/sites/default/files/documentation/4b-esp8266_at_command_examples_en.pdf">Version 1.3 2017 ESP8266 AT Command Examples</a></li>
<li><a href="https://www.drk.com.ar/builder.php">TCP/IP Builder 1.9 for PC</a></li>
</ul>
<h2 id="working-with-putty-and-limitations">Working with PuTTY and limitations</h2>
<p>One can use a PuTTY terminal with the virtual serial port of the Xpress board. This works fine when one is typing into the terminal. There is an issue though if one attempts pasting into the PuTTY terminal (using a right mouse click). In that case only the first character is sent. This is an issue of the USB to serial bridge on the Xpress board and not the PIC code! This was verified by using a USB to serial bridge on a different board (TTLyFTDI USB-to-TTL Cable Adapter) fed into RB7. In this case the code worked as expected and all pasted characters appeared in the PuTTY terminal and were correctly sent out uart1 TX.</p>
<figure>
<img src="images/uart1-uart2.jpg" alt="uart1-uart2.jpg" /><figcaption aria-hidden="true">uart1-uart2.jpg</figcaption>
</figure>
<p>Others have commented on the limitation of the USART to USB bridge on the Xpress board:</p>
<ul>
<li><a href="https://www.microchip.com/forums/m1097510.aspx">Xpress PIC18F46K42 board virtual COM port bridge to UART receive limitations</a></li>
</ul>
<h2 id="after-build-copy">After Build Copy</h2>
<p>Added after build execute option.</p>
<pre><code>copy C:\Users\danp\MPLABXProjects\xpress-pic18f46k42\dist\default\production\xpress-pic18f46k42.production.hex E:\output.hex /y</code></pre>
<ul>
<li>the output path will depend on the computer and operating system</li>
</ul>
<p><img src="images/after-build.png" /></p>
</body>
</html>
